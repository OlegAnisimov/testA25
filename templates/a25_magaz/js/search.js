!function(a, b){"use strict"; function q(b, c){u(b, c), k.html(""); var d = r(c); if (d.length){var e = n({typesList:d, allResults:o}); k.html(e), a(l, k).on("click", function(){h.submit()})}}function r(c){function e(c){var d = a.extend(!0, {}, c), e = [], f = null; return b.each(d, function(a){f = a.type, f || (f = {id:0, name:""}), "Структура" == f.module && (f.module = "Страницы"); var c = b.findWhere(e, {id:f.id}); c || e.push(f), f = c || f, f.elements = f.elements || [], f.elements.push(a)}), e}var d = c.item; return d?e(d):[]}function s(a){return a = a || {}, !!a.items}function t(a){var b = 0; if (0 == a.length)return b; var c = ""; for (i = 0; i < a.length; i++)c = a.charCodeAt(i), b = (b << 5) - b + c, b &= b; return b}function u(a, b){a && (f[t(a)] = b)}function v(b, g){if (b){g = "function" == typeof g?g:function(){}; var h = {}; h[d] = b, h[e] = m; var i = f[t(b)]; if (void 0 !== i)return q(b, i); a.ajax({url:c, type:"get", dataType:"json", data:h, success:g})}}var c = "/udata://search/search_do/.json", d = "search_string", e = "per_page", f = {}, g = null, h = null, j = null, k = null, l = ".search-all-result", m = 15, n = null, o = "Все результаты"; a(function(){h = a("form.search"), g = a("input[name=search_string]", h).first(), j = a("#search-result-template", h), k = a(".search-result", h), h.length && g.length && j.length && (n = b.template(j.html()), g.on("input", function(){var a = g.val(); v(a, function(b){s(b) && q(a, b.items)})}), g.on("blur", function(){setTimeout(function(){k.html("")}, 200)}))})}(jQuery, _);